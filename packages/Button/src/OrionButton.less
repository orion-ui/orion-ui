@import '../../Shared/styles/variables.less';
@import '../../Shared/styles/mixins.less';

.icon-size(@size) {
	.square(@size);
	.flex-align();
	font-size: @size;
}

.orion-button {
	transition:
		box-shadow 0.3s,
		background 0.3s,
		opacity 0.3s,
		transform 0.3s,
		border-color 0.2s;
	position: relative;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	vertical-align: middle;
	border-radius: var(--radius-small);
	border: none;
	appearance: none;
	outline: none;
	font-family: var(--font-family);
	font-weight: 600;
	text-transform: uppercase;
	cursor: pointer;
	overflow: hidden;
	border-width: 0.0625rem;
	border-style: solid;
	border-color: transparent;
	line-height: 1;

	[data-orion-theme='dark'] & {
		box-shadow: none;
	}

	&__ripple {
		position: absolute;
		background: fade(white, 20);
		height: 1.25rem;
		width: 1.25rem;
		border-radius: 100%;
		z-index: 5;
		pointer-events: none;
		opacity: 1;
		transform: scale(1);
		animation: click 0.7s ease-in-out 0s 1 normal none running;

		.orion-button--default & {
			background: fade(black, 5);
			[data-orion-theme='dark'] & {
				background: fade(white, 10);
			}
		}
	}

	&__text,
	&__icon {
		.orion-button--disabled &,
		.orion-button--loading & {
			opacity: 0.7;
		}
	}

	&__text {
		text-align: center;

		.orion-button--prefix-icon & {
			&:not(:first-child) {
				text-align: left;
			}
		}
	}

	&__icon {
		.icon-size(1.25rem);
		pointer-events: none;

		> .orion-icon__loading {
			stroke: inherit;
		}
	}

	&--xs {
		gap: 0.5rem;
		padding: var(--space-xs) var(--space-md);
		font-size: 0.65rem;
		min-height: 2rem;

		.orion-button__icon {
			.icon-size(0.875rem);
		}

		&.orion-button--prefix-icon,
		&.orion-button--loading {
			padding-left: var(--space-sm);
		}

		&.orion-button--suffix-icon {
			padding-right: var(--space-sm);
		}
	}

	&--sm {
		gap: 0.65rem;
		padding: var(--space-xs) var(--space-lg);
		font-size: 0.75rem;
		min-height: 2.25rem;

		.orion-button__icon {
			.icon-size(1rem);
		}

		&.orion-button--prefix-icon,
		&.orion-button--loading {
			padding-left: var(--space-md);
		}

		&.orion-button--suffix-icon {
			padding-right: var(--space-md);
		}
	}

	&--md {
		gap: 0.7rem;
		padding: var(--space-sm) var(--space-lg);
		font-size: 0.8125rem;
		min-height: 2.5rem;

		&.orion-button--prefix-icon,
		&.orion-button--loading {
			padding-left: var(--space-md);
		}

		&.orion-button--suffix-icon {
			padding-right: var(--space-md);
		}
	}

	&--lg {
		gap: 1rem;
		padding: var(--space-sm) var(--space-lg);
		font-size: 0.9rem;
		min-height: 2.75rem;

		&.orion-button--prefix-icon,
		&.orion-button--loading {
			padding-left: var(--space-lg);
		}

		&.orion-button--suffix-icon {
			padding-right: var(--space-lg);
		}
	}

	&--xl {
		gap: 1.1rem;
		padding: var(--space-sm) var(--space-lg);
		font-size: 1rem;
		min-height: 3rem;

		&.orion-button--prefix-icon,
		&.orion-button--loading {
			padding-left: var(--space-lg);
		}

		&.orion-button--suffix-icon {
			padding-right: var(--space-lg);
		}
	}

	&--icon-only {
		padding: 0 !important;
		border-radius: 100%;
		aspect-ratio: 1;
	}

	each(@colors, {
		&--@{value} {
			
			color: white;
			stroke: white;

			background: var(~"--background-@{value}-default");
			box-shadow:
      0 0.3rem 1rem -0.3rem
      color-mix(in oklab, var(~"--background-@{value}-default") 80%, transparent);


			&.orion-button--outline, &.orion-button--nude {
				color: var(~"--text-@{value}-default");
				stroke: var(~"--border-@{value}-default");
				background: var(~"--background-@{value}-minimal");
			}
			
			&.orion-button--outline&:hover,
			&.orion-button--outline&:focus {
				border-color:  color-mix(in oklab, var(~"--border-@{value}-default") 50%, transparent);
			}

			&.orion-button--nude&:hover,
			&.orion-button--nude&:focus {
				background: var(~"--background-@{value}-minimal");

			}
		}
	});

	&--default {
		background: var(--background-neutral-default);
		color: var(--text-default-default);
		stroke: var(--border-neutral-default);
		box-shadow: 0 0.3rem 1rem -0.3rem fade(black, 20);

		&.orion-button--outline,
		&.orion-button--nude {
			background: var(--background-neutral-minimal);

			&:hover,
			&:focus {
				background: rgba(var(--background-neutral-subtle), 0.6);
				border-color:  color-mix(in oklab, var(--border-neutral-default) 60%, transparent);
			}
		}
	}

	&--inverse {
		color: var(--text-default-inverted);
		stroke: var(--border-neutral-inverted);
		background: var(--background-neutral-highlight);
		box-shadow: 0 0.3rem 1rem -0.3rem fade(black, 20);

		&.orion-button--nude {
			color: var(--text-default-default);
			stroke: var(--text-default-inverted);
		}

		&.orion-button--outline&:hover,
		&.orion-button--outline&:focus {
			border-color: var(--border-primary-default);
		}

		&.orion-button--nude&:hover,
		&.orion-button--nude&:focus {
			background: var(--border-primary-default);
		}
	}

	&--outline:not(&--inverse):not(&--default),
	&--nude:not(&--inverse):not(&--default) {
		.orion-button__text,
		.orion-button__icon {
			.color-contrast();
		}
	}

	&:hover,
	&:focus,
	&--outline,
	&--nude {
		box-shadow: none;
	}

	&--nude {
		border-color: transparent !important;
	}

	&--nude:not(:hover):not(:focus) {
		background: none;
	}

	&--block {
		width: 100%;
	}

	&--disabled {
		cursor: not-allowed;
	}

	&--loading {
		cursor: progress;
	}
}

@keyframes click {
	from {
		transform: scale(1);
		opacity: 1;
	}
	to {
		transform: scale(30);
		opacity: 0;
	}
}
