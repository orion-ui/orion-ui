@import '../../Shared/styles/variables.less';
@import '../../Shared/styles/mixins.less';

.orion-card {
	--hoverElevation: 1;
	--elevation: calc(1rem * var(--hoverElevation));
	--shadowColor: rgba(0, 0, 0, calc(0.03 * (1 + var(--hoverElevation) / 5)));
	transition:
		box-shadow 0.3s,
		transform 0.3s;
	position: relative;
	display: flex;
	flex-direction: column;
	background: var(--background-neutral-default);
	border-radius: var(--radius-8);
	box-shadow: 0 0.0625rem 0.1875rem fade(black, 10);
	color: var(--text-default-default);

	img {
		max-width: 100%;
	}

	&__poster {
		border-radius: var(--radius-8) var(--radius-8) 0 0;
		overflow: hidden;

		> img {
			display: block;
			width: 100%;
			object-fit: cover;
		}
	}

	&__header {
		.orion-card--xs > & {
			padding: var(--spacing-12) var(--spacing-12) 0;
		}

		.orion-card--sm > & {
			padding: var(--spacing-16) var(--spacing-16) 0;
		}

		.orion-card--md > & {
			padding: var(--spacing-24) var(--spacing-24) 0;
		}

		.orion-card--lg > & {
			padding: var(--spacing-32) var(--spacing-32) 0;
		}

		.orion-card--xl > & {
			padding: var(--spacing-48) var(--spacing-48) 0;
		}

		&--lined {
			border: 0;
			border-bottom: 0.0625rem solid;
			border-image: linear-gradient(
					to right,
					color-mix(in srgb, var(--border-neutral-default) 0%, transparent),
					color-mix(in srgb, var(--border-neutral-default) 100%, transparent)			
					)
				1;

			.orion-card--xs & {
				padding: var(--spacing-12);
			}

			.orion-card--sm & {
				padding: var(--spacing-16);
			}

			.orion-card--md & {
				padding: var(--spacing-24);
			}

			.orion-card--lg & {
				padding: var(--spacing-32);
			}

			.orion-card--xl & {
				padding: var(--spacing-48);
			}
		}
	}

	&__body {
		flex: 1 0 0%;
		font-size: var(--typography-size-sm);

		.orion-card--xs > & {
			padding: var(--spacing-12);
		}

		.orion-card--sm > & {
			padding: var(--spacing-16);
		}

		.orion-card--md > & {
			padding: var(--spacing-24);
		}

		.orion-card--lg > & {
			padding: var(--spacing-32);
		}

		.orion-card--xl > & {
			padding: var(--spacing-48);
		}

		&:empty {
			padding-top: 0;
		}

		> .orion-loader,
		> .orion-overlay {
			border-radius: var(--radius-medium);
		}
	}

	&__actions {
		.flex-align();
		position: relative;
		flex-wrap: wrap-reverse;
		color: var(--text-default-default);

		&--right {
			justify-content: flex-end;
		}

		.icon {
			position: relative;
			transition: color 0.3s;
			margin: 0 0.5rem;
			font-size: 1.25rem;

			@media @phone {
				margin: 0.5rem;
				font-size: 1.5rem;
			}

			&__indicator {
				.circle(0.5rem);
				position: absolute;
				bottom: 0;
				background: var(--background-neutral-moderate);

				&--info {
					background: var(--background-info-default);
				}

				&--mobile {
					.circle(1rem);
					.flex-align();
					left: -0.3rem;
					bottom: -0.5rem;

					&::after {
						font-family: var(--font-family);
						content: attr(data-count);
						color: var(--text-default-inverted);
						font-size: 0.5rem;
						font-weight: bold;
					}
				}
			}

			&:hover:not(.orion-icon--ripple) {
				color: var(--text-info-default);
			}
		}

		.orion-button {
			margin: 0.5rem;
		}

		.orion-card--xs > & {
			padding: 0 var(--spacing-12) var(--spacing-12);
		}

		.orion-card--sm > & {
			padding: var(--spacing-8) var(--spacing-16) var(--spacing-32);
		}

		.orion-card--md > & {
			padding: var(--spacing-16) var(--spacing-24) var(--spacing-32);
		}

		.orion-card--lg > & {
			padding: var(--spacing-24) var(--spacing-32) var(--spacing-32);
		}

		.orion-card--xl > & {
			padding: var(--spacing-48) var(--spacing-48) var(--spacing-48);
		}

		&--lined {
			border: 0;
			border-top: 0.0625rem solid;
			border-image: linear-gradient(
					to right,
					color-mix(in srgb, var(--border-neutral-default) 0%, transparent),
					color-mix(in srgb, var(--border-neutral-default) 100%, transparent)	
				)
				1;

			.orion-card--xs > & {
				padding: var(--spacing-12);
			}

			.orion-card--sm > & {
				padding: var(--spacing-16);
			}

			.orion-card--md > & {
				padding: var(--spacing-24);
			}

			.orion-card--lg > & {
				padding: var(--spacing-32) var(--spacing-32);
			}

			.orion-card--xl > & {
				padding: var(--spacing-48) var(--spacing-48);
			}
		}
	}

	&__title {
		margin: 0;
		font-size: var(--typography-size-h5);
		color: var(--text-default-default);
		font-weight: 600;

		.orion-card--xs & {
			font-size: var(--typography-size-lg);
		}

		.orion-card--sm & {
			font-size: var(--typography-size-lg);
		}

		.orion-card--lg & {
			font-size: var(--typography-size-h4);
		}

		.orion-card--xl & {
			font-size: var(--typography-size-h4);
		}
	}

	&__subtitle {
		margin-top: var(--spacing-8);
		font-size: var(--typography-size-base);
		color: var(--text-default-subtle);
		font-weight: 400;

		.orion-card--xs & {
			font-size: var(--typography-size-sm);
		}

		.orion-card--sm & {
			font-size: var(--typography-size-sm);
		}

		.orion-card--lg & {
			font-size: var(--typography-size-lg);
		}

		.orion-card--xl & {
			font-size: var(--typography-size-lg);
		}
	}

	&__selected {
		transition: transform 0.3s;
		position: absolute;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		display: flex;
		align-items: flex-end;
		justify-content: flex-end;
		pointer-events: none;
		border-bottom-right-radius: var(--radius-8);
		overflow: hidden;
		transform-origin: bottom right;
		transform: scale(0);

		.orion-card--selected & {
			transform: scale(1);
		}

		svg {
			position: absolute;
			bottom: 0;
			right: 0;
		}

		svg.marker {
			.square(5.625rem);

			each(@colors, {
				.orion-card--selected-@{value} & {
					fill: var(~"--background-@{value}-default");
				}
			});

			.orion-card--selected-default & {
				fill: var(--background-neutral-moderate);
			}

			.orion-card--selected-inverted & {
				fill: var(--background-neutral-highlight);
			}
		}

		svg.check {
			transition: all 0.3s ease;
			bottom: 0.3rem;
			right: 0.3rem;
			width: 0.75rem;
			height: 0.5rem;
			fill: none;
			stroke: white;
			stroke-width: 2;
			stroke-linecap: round;
			stroke-linejoin: round;
			stroke-dasharray: 1rem;
			stroke-dashoffset: 1rem;

			.orion-card--selected & {
				transition-delay: 0.3s;
				stroke-dashoffset: 0;
			}
		}

		&::after,
		&::before {
			content: '';
			display: block;
			position: absolute;
			bottom: 0;
			right: 0;
		}

		&::before {
			top: 0.5rem;
			width: 0.0625rem;

			each(@colors, {
				@color: ~"--background-@{value}-default";
				.orion-card--selected-@{value} & {
					background: linear-gradient(
						to bottom,
						color-mix(in srgb, var(@color) 0%, transparent),
						color-mix(in srgb, var(@color) 100%, transparent)
					);
				}
			});

			.orion-card--selected-default & {
				background: linear-gradient(
					to bottom,
					color-mix(in srgb, var(--background-neutral-default) 0%, transparent),
					color-mix(
						in srgb,
						var(--background-neutral-default) 100%,
						transparent
					)
				);
			}

			.orion-card--selected-inverted & {
				background: linear-gradient(
					to bottom,
					color-mix(in srgb, var(--background-neutral-default) 0%, transparent),
					color-mix(
						in srgb,
						var(--background-neutral-default) 100%,
						transparent
					)
				);
			}
		}

		&::after {
			left: 0.5rem;
			height: 0.0625rem;

			each(@colors, {
				@color: ~"--background-@{value}-default";
				.orion-card--selected-@{value} & {
					background: linear-gradient(
						to right,
						color-mix(in srgb, var(@color) 0%, transparent),
						color-mix(in srgb, var(@color) 100%, transparent)
					);
				}
			});

			.orion-card--selected-default & {
				background: linear-gradient(
					to right,
					color-mix(in srgb, var(--background-neutral-default) 0%, transparent),
					color-mix(
						in srgb,
						var(--background-neutral-default) 100%,
						transparent
					)
				);
			}

			.orion-card--selected-inverted & {
				background: linear-gradient(
					to right,
					color-mix(in srgb, var(--background-neutral-default) 0%, transparent),
					color-mix(
						in srgb,
						var(--background-neutral-default) 100%,
						transparent
					)
				);
			}
		}

		.icon {
			position: absolute;
			bottom: 0.3rem;
			right: 0.3rem;
			font-size: 0.5rem;
			color: var(--text-default-inverted) !important;
			margin: 0 !important;
		}
	}

	&--clickable {
		cursor: pointer;
	}

	&[class*='--gradient-'] {
		color: var(--text-default-inverted);
		.orion-card__title, .orion-card__subtitle {
			color: var(--text-default-inverted);
		}
	}

	each(@colors, {
		&--gradient-@{value} {
			background: linear-gradient(
						to bottom right,
						var(~"--background-@{value}-default"),
						var(~"--background-@{value}-subtle")
					);
		}
	});

	&--gradient-default.orion-card {
		color: var(--text-default-default);

		.orion-card__title, .orion-card__subtitle {
			color: var(--text-default-default);
		}

		background: linear-gradient(
			to bottom right,
			color-mix(in srgb, var(--background-neutral-default) 100%, transparent),
						color-mix(in srgb, var(--background-neutral-moderate) 100%, transparent),

		);
	}

	&--gradient-inverted.orion-card {
		color: var(--text-default-default);

		.orion-card__title, .orion-card__subtitle {
			color: var(--text-default-default);
		}

			background: linear-gradient(
				to bottom right,
				color-mix(in srgb, var(--background-neutral-moderate) 100%, transparent),
								color-mix(in srgb, var(--background-neutral-highlight) 100%, transparent),

			);
		
	}

	&--no-elevation {
		border: 1px solid var(--border-neutral-default);
		box-shadow: none;

		&:focus {
			outline: 1px solid var(--border-neutral-focus);
		}
	}

	&:not(.orion-card--no-elevation):hover {

		body:not(.istouch) & {
			z-index: 1;
			transform: translate3d(0, -0.125rem, 0);
			box-shadow:
				0 calc(var(--elevation) / 8) calc(var(--elevation) / 8)
					var(--shadowColor),
				0 calc(var(--elevation) / 4) calc(var(--elevation) / 4)
					var(--shadowColor),
				0 calc(var(--elevation) / 2) calc(var(--elevation) / 2)
					var(--shadowColor),
				0 var(--elevation) var(--elevation) var(--shadowColor),
				0 calc(var(--elevation) * 2) calc(var(--elevation) * 2)
					var(--shadowColor);
		}
	}
}
